/*! For license information please see chat-widget.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ChatWidget=t():e.ChatWidget=t()}(self,(function(){return(()=>{var e={472:e=>{e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn.smooch.io/",n(n.s=6)}([function(e,t,n){var o=n(3);e.exports=new o},function(e,t){e.exports={isFunction:function(e){return"function"==typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,o=e.length;n<o&&!1!==t(e[n],n);n++);}}},function(e,t,n){e.exports={iframe:"_2ChX4GFAl1-UBiWknYZyEQ",displayButton:"avcHn2VQJenBvoR5hilPG",widgetClosed:"_3fQbteJd3oQu4il3LpMKkX","iframe-button-close-lg":"_3FxKeTOOgcsFroUq6se9N7","iframe-button-close-md":"_1GmqPtlICLsWVMg2Kpdx_0","iframe-button-close-sm":"_36mHeCXpAKdhEsuuD5g8oV","iframe-button-close-xs":"_1ZWQW0p6AI6UGwBFbdBf9M",displayTab:"_3dtqBiGeC8k3yop4A-9Lwm",widgetOpened:"_2TELtk5nDKlQudVSivRjpt",widgetEmbedded:"_24n-ftZlG3wDvoWFR8zUnn"}},function(e,t,n){var o=n(4),r=n(1),i=r.each,a=r.isFunction,s=r.isArray;function c(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}c.prototype={constructor:c,register:function(e,t,n){var r=this.queries,c=n&&this.browserIsIncapable;return r[e]||(r[e]=new o(e,c)),a(t)&&(t={match:t}),s(t)||(t=[t]),i(t,(function(t){a(t)&&(t={match:t}),r[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.exports=c},function(e,t,n){var o=n(5),r=n(1).each;function i(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}i.prototype={constuctor:i,addHandler:function(e){var t=new o(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;r(t,(function(n,o){if(n.equals(e))return n.destroy(),!t.splice(o,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";r(this.handlers,(function(t){t[e]()}))}},e.exports=i},function(e,t){function n(e){this.options=e,!e.deferSetup&&this.setup()}n.prototype={constructor:n,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o);function i(e){"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||!document.body?document.addEventListener("DOMContentLoaded",(function(){e()})):e()}function a(e){var t=["screen"];return e.minHeight&&t.push("(min-height: ".concat(e.minHeight,"px)")),e.maxHeight&&t.push("(max-height: ".concat(e.maxHeight,"px)")),e.minWidth&&t.push("(min-width: ".concat(e.minWidth,"px)")),e.maxWidth&&t.push("(max-width: ".concat(e.maxWidth,"px)")),t.join(" and ")}var s=n(0),c=n.n(s),d={lg:{minHeight:668,minWidth:1200},md:[{minHeight:508,minWidth:768,maxWidth:1199},{minHeight:508,maxHeight:667,minWidth:768}],sm:{maxHeight:507,minWidth:768},xs:{maxWidth:767}},u=["lg","md","sm","xs"];function l(e){for(var t=0;t<u.length;t++){var n=u[t],o=d[n];"[object Array]"!==Object.prototype.toString.call(o)&&(o=[o]);for(var r=0;r<o.length;r++)e({rule:o[r],size:n})}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var m,y,v,g,b,w={},x=[],C=[],O=/lebo|awle|pide|obo|rawli|dsbo/i.test(navigator.userAgent),j=/PhantomJS/.test(navigator.userAgent)&&!0,S=["init","login","on","off","logout","sendMessage","triggerPostback","createConversation","updateConversation","updateUser","getDisplayedConversation","getConversationById","getConversations","getMoreConversations","hasMoreConversations","getUser","open","close","isOpened","loadConversation","setDelegate","markAllAsRead","showNotificationChannelPrompt","setPredefinedMessage","startTyping","stopTyping"];if(O){var _=document.createElement("a");_.href="https://smooch.io/live-web-chat/?utm_source=widget",_.text="Powered by Zendesk Sunshine",i((function(){document.body.appendChild(_)}))}function W(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="https://cdn.smooch.io/smooch.5.3.14.css",document.body.appendChild(e)}function M(e){var t;window.__onWebMessengerFrameReady__=function(){},m=e,v||(t=y,l((function(e){var n=e.rule,o=e.size;c.a.register(a(n),(function(){t.contentWindow.postMessage({type:"sizeChange",value:o},"".concat(location.protocol,"//").concat(location.host))}))})));for(var n=S[0],o=0;o<S.length;n=S[++o])w[n]=m[n];if(C){for(var r=C[0],i=0;i<C.length;r=C[++i]){var s;(s=m).on.apply(s,h(r.args))}C=void 0}if(b){var d,u=(d=m).init.apply(d,h(b));b=void 0;for(var f=x[0],p=0;p<x.length;f=x[++p])u="then"===f.type?u.then(f.next):u.catch(f.next);x=[]}}var A=function(e){return e.contentWindow&&e.contentWindow.document};function I(){if(!y){var e=null,t=!1;(y=document.createElement("iframe")).id="web-messenger-container",y.frameBorder=0,y.allowFullscreen=!0,y.allowTransparency=!0,y.scrolling="no",y.className=r.a.iframe;var n=function(){t=!0,clearInterval(e),delete y.onload;var n=A(y);n.open(),n.write("\n                    <!DOCTYPE html>\n                    <html>\n                        <head>\n                            ".concat("",'\n                            <link rel="stylesheet" href="').concat("https://cdn.smooch.io/frame.5.3.14.css",'" type="text/css" />\n                            <script src="').concat("https://cdn.smooch.io/frame.5.3.14.min.js",'" async crossorigin="anonymous"><\/script>\n                        </head>\n                        <body>\n                            <div id="mount"></div>\n                        </body>\n                    </html>\n                    ')),n.close()};e=setInterval((function(){var e=A(y);t||!e||"complete"!==e.readyState&&"interactive"!==e.readyState||n()}),1e3),y.onload=function(){t||n()}}v?g&&(g.appendChild(y),g=void 0):document.body.appendChild(y)}var P={VERSION:"5.3.14",on:function(){C||(C=[]);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];C.push({args:t})},init:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];b=t,v=t.length>0&&!!t[0].embedded,O||j||i((function(){W(),I()}));var o={then:function(e){return x.push({type:"then",next:e}),o},catch:function(e){return x.push({type:"catch",next:e}),o}};return o},render:function(e){y?e.appendChild(y):g=e},destroy:function(){m&&(m.destroy(),y.remove?y.remove():y.parentNode.removeChild(y),l((function(e){var t=e.rule;c.a.unregister(a(t))})),H())}};function H(){if(!document.getElementById("web-messenger-container")){m=void 0,y=void 0,window.__onWebMessengerFrameReady__=M;for(var e=S[0],t=0;t<S.length;e=S[++t])w[e]&&delete w[e];f(w,P)}}H(),t.default=w}])}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o),n.d(o,{init:()=>t,isOpened:()=>r,close:()=>i,open:()=>a,destroy:()=>s});const e=n(472).default;function t(t){void 0===e.isOpened||e.isOpened()?(e.on("widget:opened",(()=>{document.getElementById("web-messenger-container").style.visibility="initial"})),e.on("widget:closed",(()=>{const e=document.getElementById("web-messenger-container");setTimeout((()=>{e.style.visibility="hidden"}),350)})),e.init({integrationId:"61684da2c9fd4b00df540ad6",canUserSeeConversationList:!1,jwt:t.jwtToken,externalId:t.email,locale:"en-US",menuItems:{imageUpload:!1,fileUpload:!1,shareLocation:!1},buttonWidth:"0",buttonHeight:"0",fixedHeader:!1}).then((()=>{const n=e.getConversations();let o;console.log("Conversations: ",n);for(const r of n)if(r.metadata.orderNumber===t.orderNumber){o=r.id,e.loadConversation(o),e.open();break}if(void 0===o){const{jwtToken:n,...o}=t;e.createConversation({displayName:t.orderNumber,metadata:{...o,orderNumber:t.orderNumber}}).then((t=>{e.loadConversation(t.id),e.open()}))}}))):e.open()}function r(){return e.isOpened()}function i(){return e.close()}function a(){return e.open()}function s(){return e.destroy()}})(),o})()}));
